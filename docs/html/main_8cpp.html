<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>move-color-prototype: examples/main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">move-color-prototype
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d28a4824dc47e487b107a5db32ef43c4.html">examples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">main.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;dirent.h&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;sstream&gt;</code><br />
<code>#include &lt;iomanip&gt;</code><br />
<code>#include &lt;opencv2/core.hpp&gt;</code><br />
<code>#include &lt;opencv2/highgui.hpp&gt;</code><br />
<code>#include &lt;opencv2/videoio.hpp&gt;</code><br />
<code>#include &lt;opencv2/imgproc.hpp&gt;</code><br />
<code>#include &lt;opencv2/imgcodecs.hpp&gt;</code><br />
<code>#include &quot;<a class="el" href="calibration__handler_8h_source.html">calibration_handler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="circle__handler_8h_source.html">circle_handler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="particle__weighting_8h_source.html">particle_weighting.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aebb83e71efb3526bb487425e38a0c839"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aebb83e71efb3526bb487425e38a0c839">gameplay</a> (cv::VideoCapture *cap, cv::Mat *mirror, const std::string &amp;title, const uint8_t corner_2_center, <a class="el" href="class_circle_handler.html">CircleHandler</a> *pos_handler, <a class="el" href="class_circle_handler.html">CircleHandler</a> *neg_handler, const uint8_t max_distance, std::vector&lt; std::vector&lt; <a class="el" href="class_particle_weighting.html">ParticleWeighting</a> &gt;&gt; *weighting_matrix)</td></tr>
<tr class="memdesc:aebb83e71efb3526bb487425e38a0c839"><td class="mdescLeft">&#160;</td><td class="mdescRight">A single play.  <a href="main_8cpp.html#aebb83e71efb3526bb487425e38a0c839">More...</a><br /></td></tr>
<tr class="separator:aebb83e71efb3526bb487425e38a0c839"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaad1e188cb36effea865ba8f6448b2b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aeaad1e188cb36effea865ba8f6448b2b">photo_with_timer</a> (cv::VideoCapture *cap, cv::Mat *image, const std::string &amp;title, int16_t key_abort)</td></tr>
<tr class="memdesc:aeaad1e188cb36effea865ba8f6448b2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take a photo after 3 seconds.  <a href="main_8cpp.html#aeaad1e188cb36effea865ba8f6448b2b">More...</a><br /></td></tr>
<tr class="separator:aeaad1e188cb36effea865ba8f6448b2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a107100a1be45e0ebdb88bec362320179"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a107100a1be45e0ebdb88bec362320179">wait_and_show_seconds</a> (cv::VideoCapture *cap, cv::Mat *image, const std::string &amp;title, int16_t key_abort, const uint8_t &amp;seconds_to_wait)</td></tr>
<tr class="memdesc:a107100a1be45e0ebdb88bec362320179"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count down and display left seconds.  <a href="main_8cpp.html#a107100a1be45e0ebdb88bec362320179">More...</a><br /></td></tr>
<tr class="separator:a107100a1be45e0ebdb88bec362320179"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dd6e7c18eaeb1819d4f4eb884db8121"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a0dd6e7c18eaeb1819d4f4eb884db8121">load_highscore</a> (const std::string &amp;filename, int16_t hits)</td></tr>
<tr class="memdesc:a0dd6e7c18eaeb1819d4f4eb884db8121"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load last highscore and return current highscore.  <a href="main_8cpp.html#a0dd6e7c18eaeb1819d4f4eb884db8121">More...</a><br /></td></tr>
<tr class="separator:a0dd6e7c18eaeb1819d4f4eb884db8121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef99e6a0178d96dce255df0d9994e51a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aef99e6a0178d96dce255df0d9994e51a">save_calibration</a> (const std::string &amp;filename, const std::vector&lt; double &gt; &amp;hsv_color, const std::vector&lt; double &gt; &amp;factors_color)</td></tr>
<tr class="memdesc:aef99e6a0178d96dce255df0d9994e51a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save calibration in a txt file.  <a href="main_8cpp.html#aef99e6a0178d96dce255df0d9994e51a">More...</a><br /></td></tr>
<tr class="separator:aef99e6a0178d96dce255df0d9994e51a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="separator:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aebb83e71efb3526bb487425e38a0c839"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebb83e71efb3526bb487425e38a0c839">&#9670;&nbsp;</a></span>gameplay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t gameplay </td>
          <td>(</td>
          <td class="paramtype">cv::VideoCapture *&#160;</td>
          <td class="paramname"><em>cap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cv::Mat *&#160;</td>
          <td class="paramname"><em>mirror</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>title</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>corner_2_center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_circle_handler.html">CircleHandler</a> *&#160;</td>
          <td class="paramname"><em>pos_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_circle_handler.html">CircleHandler</a> *&#160;</td>
          <td class="paramname"><em>neg_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>max_distance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::vector&lt; <a class="el" href="class_particle_weighting.html">ParticleWeighting</a> &gt;&gt; *&#160;</td>
          <td class="paramname"><em>weighting_matrix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A single play. </p>
<p>Start of a little game. The goal is to hit the bright green circles and avoid the bright red circles. The dark green and red circles are not active and will turn bright later. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cap</td><td>Camera for acquisition of pictures. </td></tr>
    <tr><td class="paramname">mirror</td><td>Image for visualization. </td></tr>
    <tr><td class="paramname">title</td><td>Title of game play. </td></tr>
    <tr><td class="paramname">corner_2_center</td><td>Distance from center of particle weighting to its start. </td></tr>
    <tr><td class="paramname">pos_handler</td><td>Handler of positive circles. </td></tr>
    <tr><td class="paramname">neg_handler</td><td>Handler of negative circles. </td></tr>
    <tr><td class="paramname">max_distance</td><td>Distance of one particle weighting. </td></tr>
    <tr><td class="paramname">weighting_matrix</td><td>Matrix of particle weightings. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Code of user input. 0 for replay, 1 for end of game and 2 for calibration. </dd></dl>

</div>
</div>
<a id="a0dd6e7c18eaeb1819d4f4eb884db8121"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dd6e7c18eaeb1819d4f4eb884db8121">&#9670;&nbsp;</a></span>load_highscore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t load_highscore </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>hits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load last highscore and return current highscore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Name of highscore file. </td></tr>
    <tr><td class="paramname">hits</td><td>Number of hits in actual game play. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Actual highscore. </dd></dl>

</div>
</div>
<a id="ae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66f6b31b5ad750f1fe042a706a4e3d4">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aeaad1e188cb36effea865ba8f6448b2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaad1e188cb36effea865ba8f6448b2b">&#9670;&nbsp;</a></span>photo_with_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool photo_with_timer </td>
          <td>(</td>
          <td class="paramtype">cv::VideoCapture *&#160;</td>
          <td class="paramname"><em>cap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cv::Mat *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>title</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>key_abort</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Take a photo after 3 seconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cap</td><td>Camera to shot photo. </td></tr>
    <tr><td class="paramname">image</td><td>Image to save picture. </td></tr>
    <tr><td class="paramname">title</td><td>Title shown on counting down. </td></tr>
    <tr><td class="paramname">key_abort</td><td>Key to abort timer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>False after abort. </dd></dl>

</div>
</div>
<a id="aef99e6a0178d96dce255df0d9994e51a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef99e6a0178d96dce255df0d9994e51a">&#9670;&nbsp;</a></span>save_calibration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void save_calibration </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>hsv_color</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>factors_color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save calibration in a txt file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Name of the calibration file. </td></tr>
    <tr><td class="paramname">hsv_color</td><td>Vector of bright optimal values. </td></tr>
    <tr><td class="paramname">factors_color</td><td>Vector of bright factors. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a107100a1be45e0ebdb88bec362320179"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a107100a1be45e0ebdb88bec362320179">&#9670;&nbsp;</a></span>wait_and_show_seconds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool wait_and_show_seconds </td>
          <td>(</td>
          <td class="paramtype">cv::VideoCapture *&#160;</td>
          <td class="paramname"><em>cap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cv::Mat *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>title</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>key_abort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t &amp;&#160;</td>
          <td class="paramname"><em>seconds_to_wait</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Count down and display left seconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cap</td><td>Camera to shot photo. </td></tr>
    <tr><td class="paramname">image</td><td>Image to store the picture. </td></tr>
    <tr><td class="paramname">title</td><td>Title shown on counting down. </td></tr>
    <tr><td class="paramname">key_abort</td><td>Key to abort timer. </td></tr>
    <tr><td class="paramname">seconds_to_wait</td><td>Seconds before function returns. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>False after abort and true after countdown. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
